{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/createSuper\";// import React, { createRef, useEffect } from \"react\";\n// const canvasRef = createRef();\n// function getImage(index) {\n//   return (\n//     // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n//     // index.toString().padStart(4, 0) +\n//     // \".jpg\"\n//     process.env.PUBLIC_URL + \"/img/img\" + index.toString() + \".png\"\n//   );\n// }\n// const updateImage = (imgObj, index, ctx) => {\n//   if (index === 0 || index === null) {\n//     index = 1;\n//   }\n//   imgObj.src = getImage(index);\n//   console.log(imgObj);\n//   ctx.drawImage(imgObj, 0, 0);\n// };\n// const getAllImg = async () => {\n//   var x = 0;\n//   while (x != 7) {\n//     x++;\n//     const imgObj = new Image();\n//     imgObj.src = await getImage(x);\n//   }\n// };\n// function Profile() {\n//   getAllImg();\n//   const updateCanvas = async () => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n//     const frameCount = 7;\n//     var imageObj1 = document.getElementById(\"source\");\n//     canvas.width = imageObj1.width;\n//     canvas.height = imageObj1.height;\n//     const html = document.documentElement;\n//     const scrollTop = html.scrollTop;\n//     const maxScrollTop = html.scrollHeight - window.innerHeight;\n//     const scrollFraction = scrollTop / maxScrollTop;\n//     console.log(scrollTop, scrollFraction);\n//     const frameIndex = Math.min(\n//       frameCount - 1,\n//       Math.floor(scrollFraction * frameCount)\n//     );\n//     await updateImage(imageObj1, frameIndex + 1, ctx);\n//     console.log(frameIndex);\n//   };\n//   useEffect(() => {\n//     document.onscroll = async () => {\n//       await requestAnimationFrame(() => {\n//         updateCanvas();\n//       });\n//       return () => {\n//         //window.removeEventListener(onscroll);\n//         // cancelAnimationFrame();\n//       };\n//     };\n//   }, []);\n//   return (\n//     <canvas ref={canvasRef} style={{}}>\n//       <img id=\"source\" src=\"./../assets/img/0001.png\"></img>\n//     </canvas>\n//   );\n// }\n// export default Profile;\nimport React,{Component,createRef}from\"react\";import{Container,Row}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";var checkImage=function checkImage(path){return new Promise(function(resolve){var img=new Image();img.src=path;img.onload=function(){return resolve(path);};});};var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);_this=_super.call(this);_this.updateImage=function(imgObj,index,ctx){if(index===0||index===null){index=1;}imgObj=_this.getImage(index);imgObj.onload=function(){ctx.drawImage(imgObj,0,0);};};_this.getAllImg=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var x,imgObj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:x=0;case 1:if(!(x!=179)){_context.next=9;break;}x++;imgObj=new Image();imgObj=_this.getImage(x);_context.next=7;return imgObj.onload;case 7:_context.next=1;break;case 9:case\"end\":return _context.stop();}}},_callee);}));_this.canvasRef=createRef;return _this;}_createClass(Profile,[{key:\"getImage\",value:function getImage(index){var imgUrl=// \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n// index.toString().padStart(4, 0) +\n// \".jpg\";\nprocess.env.PUBLIC_URL+\"/img/img\"+index.toString().padStart(5,0)+\".jpeg\";var imgObj=new Image();var myPromise=checkImage(imgUrl);myPromise.then(function(response){imgObj.src=imgUrl;console.log(\"resolved\");}).catch(function(error){return console.error(error);});return imgObj;}},{key:\"showImage\",value:function showImage(){var canvas=this.refs.canvas;var imgO=new Image();imgO=this.getImage(1);imgO.onload=function(){var ctx=canvas.getContext(\"2d\");canvas.width=imgO.width;canvas.height=imgO.height;console.log(imgO.width,imgO.height);ctx.drawImage(imgO,0,0);};}},{key:\"updateCanvas\",value:function updateCanvas(){var canvas=this.refs.canvas;var frameCount=179;var imageObj1=new Image();imageObj1=this.getImage(1);var ctx=canvas.getContext(\"2d\");var html=document.documentElement;var scrollTop=html.scrollTop;var maxScrollTop=html.scrollHeight-window.innerHeight;var scrollFraction=scrollTop/maxScrollTop;var frameIndex=Math.min(frameCount-1,Math.floor(scrollFraction*frameCount));this.updateImage(imageObj1,frameIndex+1,ctx);console.log(frameIndex);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getAllImg();this.showImage();document.onscroll=function(){requestAnimationFrame(function(){_this2.updateCanvas();});};}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){document.scrollTop=0;}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.scrollTop=0;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Container,{fluid:true,style:{marginTop:\"80px\"},children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(\"canvas\",{ref:\"canvas\",width:\"1158\",height:\"770\"})})});}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"sources":["/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js"],"names":["React","Component","createRef","Container","Row","checkImage","path","Promise","resolve","img","Image","src","onload","Profile","updateImage","imgObj","index","ctx","getImage","drawImage","getAllImg","x","canvasRef","imgUrl","process","env","PUBLIC_URL","toString","padStart","myPromise","then","response","console","log","catch","error","canvas","refs","imgO","getContext","width","height","frameCount","imageObj1","html","document","documentElement","scrollTop","maxScrollTop","scrollHeight","window","innerHeight","scrollFraction","frameIndex","Math","min","floor","showImage","onscroll","requestAnimationFrame","updateCanvas","marginTop"],"mappings":"6rBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,KAA4C,OAA5C,CACA,OAASC,SAAT,CAAoBC,GAApB,KAA+B,iBAA/B,C,2CACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,QACjB,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CACvB,GAAMC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,EAAZ,CACAD,GAAG,CAACE,GAAJ,CAAUL,IAAV,CACAG,GAAG,CAACG,MAAJ,CAAa,iBAAMJ,CAAAA,OAAO,CAACF,IAAD,CAAb,EAAb,CACD,CAJD,CADiB,EAAnB,C,GAOMO,CAAAA,O,kGACJ,kBAAc,yCACZ,wBADY,MAwBdC,WAxBc,CAwBA,SAACC,MAAD,CAASC,KAAT,CAAgBC,GAAhB,CAAwB,CACpC,GAAID,KAAK,GAAK,CAAV,EAAeA,KAAK,GAAK,IAA7B,CAAmC,CACjCA,KAAK,CAAG,CAAR,CACD,CACDD,MAAM,CAAG,MAAKG,QAAL,CAAcF,KAAd,CAAT,CACAD,MAAM,CAACH,MAAP,CAAgB,UAAM,CACpBK,GAAG,CAACE,SAAJ,CAAcJ,MAAd,CAAsB,CAAtB,CAAyB,CAAzB,EACD,CAFD,CAGD,CAhCa,OAkEdK,SAlEc,sEAkEF,gJACNC,CADM,CACF,CADE,aAEHA,CAAC,EAAI,GAFF,0BAGRA,CAAC,GACGN,MAJI,CAIK,GAAIL,CAAAA,KAAJ,EAJL,CAMRK,MAAM,CAAG,MAAKG,QAAL,CAAcG,CAAd,CAAT,CANQ,sBAOFN,CAAAA,MAAM,CAACH,MAPL,oFAlEE,GAEZ,MAAKU,SAAL,CAAiBpB,SAAjB,CAFY,aAGb,C,4CACD,kBAASc,KAAT,CAAgB,CACd,GAAMO,CAAAA,MAAM,CACV;AACA;AACA;AACAC,OAAO,CAACC,GAAR,CAAYC,UAAZ,CACA,UADA,CAEAV,KAAK,CAACW,QAAN,GAAiBC,QAAjB,CAA0B,CAA1B,CAA6B,CAA7B,CAFA,CAGA,OAPF,CAQA,GAAMb,CAAAA,MAAM,CAAG,GAAIL,CAAAA,KAAJ,EAAf,CACA,GAAMmB,CAAAA,SAAS,CAAGxB,UAAU,CAACkB,MAAD,CAA5B,CACAM,SAAS,CACNC,IADH,CACQ,SAACC,QAAD,CAAc,CAClBhB,MAAM,CAACJ,GAAP,CAAaY,MAAb,CACAS,OAAO,CAACC,GAAR,CAAY,UAAZ,EACD,CAJH,EAKGC,KALH,CAKS,SAACC,KAAD,QAAWH,CAAAA,OAAO,CAACG,KAAR,CAAcA,KAAd,CAAX,EALT,EAMA,MAAOpB,CAAAA,MAAP,CACD,C,yBAWD,oBAAY,CACV,GAAMqB,CAAAA,MAAM,CAAG,KAAKC,IAAL,CAAUD,MAAzB,CACA,GAAIE,CAAAA,IAAI,CAAG,GAAI5B,CAAAA,KAAJ,EAAX,CACA4B,IAAI,CAAG,KAAKpB,QAAL,CAAc,CAAd,CAAP,CACAoB,IAAI,CAAC1B,MAAL,CAAc,UAAM,CAClB,GAAMK,CAAAA,GAAG,CAAGmB,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAZ,CACAH,MAAM,CAACI,KAAP,CAAeF,IAAI,CAACE,KAApB,CACAJ,MAAM,CAACK,MAAP,CAAgBH,IAAI,CAACG,MAArB,CACAT,OAAO,CAACC,GAAR,CAAYK,IAAI,CAACE,KAAjB,CAAwBF,IAAI,CAACG,MAA7B,EACAxB,GAAG,CAACE,SAAJ,CAAcmB,IAAd,CAAoB,CAApB,CAAuB,CAAvB,EACD,CAND,CAOD,C,4BACD,uBAAe,CACb,GAAMF,CAAAA,MAAM,CAAG,KAAKC,IAAL,CAAUD,MAAzB,CACA,GAAMM,CAAAA,UAAU,CAAG,GAAnB,CACA,GAAIC,CAAAA,SAAS,CAAG,GAAIjC,CAAAA,KAAJ,EAAhB,CACAiC,SAAS,CAAG,KAAKzB,QAAL,CAAc,CAAd,CAAZ,CACA,GAAMD,CAAAA,GAAG,CAAGmB,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAZ,CAEA,GAAMK,CAAAA,IAAI,CAAGC,QAAQ,CAACC,eAAtB,CACA,GAAMC,CAAAA,SAAS,CAAGH,IAAI,CAACG,SAAvB,CACA,GAAMC,CAAAA,YAAY,CAAGJ,IAAI,CAACK,YAAL,CAAoBC,MAAM,CAACC,WAAhD,CACA,GAAMC,CAAAA,cAAc,CAAGL,SAAS,CAAGC,YAAnC,CACA,GAAMK,CAAAA,UAAU,CAAGC,IAAI,CAACC,GAAL,CACjBb,UAAU,CAAG,CADI,CAEjBY,IAAI,CAACE,KAAL,CAAWJ,cAAc,CAAGV,UAA5B,CAFiB,CAAnB,CAKA,KAAK5B,WAAL,CAAiB6B,SAAjB,CAA4BU,UAAU,CAAG,CAAzC,CAA4CpC,GAA5C,EAEAe,OAAO,CAACC,GAAR,CAAYoB,UAAZ,EACD,C,iCAYD,4BAAoB,iBAClB,KAAKjC,SAAL,GACA,KAAKqC,SAAL,GACAZ,QAAQ,CAACa,QAAT,CAAoB,UAAM,CACxBC,qBAAqB,CAAC,UAAM,CAC1B,MAAI,CAACC,YAAL,GACD,CAFoB,CAArB,CAGD,CAJD,CAKD,C,kCACD,6BAAqB,CACnBf,QAAQ,CAACE,SAAT,CAAqB,CAArB,CACD,C,oCACD,+BAAuB,CACrBF,QAAQ,CAACE,SAAT,CAAqB,CAArB,CACD,C,sBACD,iBAAS,CACP,mBACE,KAAC,SAAD,EAAW,KAAK,KAAhB,CAAiB,KAAK,CAAE,CAAEc,SAAS,CAAE,MAAb,CAAxB,uBACE,KAAC,GAAD,wBACE,eAAQ,GAAG,CAAC,QAAZ,CAAqB,KAAK,CAAC,MAA3B,CAAkC,MAAM,CAAC,KAAzC,EADF,EADF,EADF,CAOD,C,qBApGmB5D,S,EAsGtB,cAAeY,CAAAA,OAAf","sourcesContent":["// import React, { createRef, useEffect } from \"react\";\n// const canvasRef = createRef();\n// function getImage(index) {\n//   return (\n//     // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n//     // index.toString().padStart(4, 0) +\n//     // \".jpg\"\n//     process.env.PUBLIC_URL + \"/img/img\" + index.toString() + \".png\"\n//   );\n// }\n// const updateImage = (imgObj, index, ctx) => {\n//   if (index === 0 || index === null) {\n//     index = 1;\n//   }\n//   imgObj.src = getImage(index);\n//   console.log(imgObj);\n//   ctx.drawImage(imgObj, 0, 0);\n// };\n// const getAllImg = async () => {\n//   var x = 0;\n//   while (x != 7) {\n//     x++;\n//     const imgObj = new Image();\n\n//     imgObj.src = await getImage(x);\n//   }\n// };\n// function Profile() {\n//   getAllImg();\n//   const updateCanvas = async () => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n//     const frameCount = 7;\n//     var imageObj1 = document.getElementById(\"source\");\n\n//     canvas.width = imageObj1.width;\n//     canvas.height = imageObj1.height;\n\n//     const html = document.documentElement;\n//     const scrollTop = html.scrollTop;\n//     const maxScrollTop = html.scrollHeight - window.innerHeight;\n//     const scrollFraction = scrollTop / maxScrollTop;\n//     console.log(scrollTop, scrollFraction);\n//     const frameIndex = Math.min(\n//       frameCount - 1,\n//       Math.floor(scrollFraction * frameCount)\n//     );\n\n//     await updateImage(imageObj1, frameIndex + 1, ctx);\n\n//     console.log(frameIndex);\n//   };\n\n//   useEffect(() => {\n//     document.onscroll = async () => {\n//       await requestAnimationFrame(() => {\n//         updateCanvas();\n//       });\n\n//       return () => {\n//         //window.removeEventListener(onscroll);\n//         // cancelAnimationFrame();\n//       };\n//     };\n//   }, []);\n\n//   return (\n//     <canvas ref={canvasRef} style={{}}>\n//       <img id=\"source\" src=\"./../assets/img/0001.png\"></img>\n//     </canvas>\n//   );\n// }\n\n// export default Profile;\nimport React, { Component, createRef } from \"react\";\nimport { Container, Row } from \"react-bootstrap\";\nconst checkImage = (path) =>\n  new Promise((resolve) => {\n    const img = new Image();\n    img.src = path;\n    img.onload = () => resolve(path);\n  });\n\nclass Profile extends Component {\n  constructor() {\n    super();\n    this.canvasRef = createRef;\n  }\n  getImage(index) {\n    const imgUrl =\n      // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n      // index.toString().padStart(4, 0) +\n      // \".jpg\";\n      process.env.PUBLIC_URL +\n      \"/img/img\" +\n      index.toString().padStart(5, 0) +\n      \".jpeg\";\n    const imgObj = new Image();\n    const myPromise = checkImage(imgUrl);\n    myPromise\n      .then((response) => {\n        imgObj.src = imgUrl;\n        console.log(\"resolved\");\n      })\n      .catch((error) => console.error(error));\n    return imgObj;\n  }\n\n  updateImage = (imgObj, index, ctx) => {\n    if (index === 0 || index === null) {\n      index = 1;\n    }\n    imgObj = this.getImage(index);\n    imgObj.onload = () => {\n      ctx.drawImage(imgObj, 0, 0);\n    };\n  };\n  showImage() {\n    const canvas = this.refs.canvas;\n    var imgO = new Image();\n    imgO = this.getImage(1);\n    imgO.onload = () => {\n      const ctx = canvas.getContext(\"2d\");\n      canvas.width = imgO.width;\n      canvas.height = imgO.height;\n      console.log(imgO.width, imgO.height);\n      ctx.drawImage(imgO, 0, 0);\n    };\n  }\n  updateCanvas() {\n    const canvas = this.refs.canvas;\n    const frameCount = 179;\n    var imageObj1 = new Image();\n    imageObj1 = this.getImage(1);\n    const ctx = canvas.getContext(\"2d\");\n\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    const frameIndex = Math.min(\n      frameCount - 1,\n      Math.floor(scrollFraction * frameCount)\n    );\n\n    this.updateImage(imageObj1, frameIndex + 1, ctx);\n\n    console.log(frameIndex);\n  }\n\n  getAllImg = async () => {\n    var x = 0;\n    while (x != 179) {\n      x++;\n      var imgObj = new Image();\n\n      imgObj = this.getImage(x);\n      await imgObj.onload;\n    }\n  };\n  componentDidMount() {\n    this.getAllImg();\n    this.showImage();\n    document.onscroll = () => {\n      requestAnimationFrame(() => {\n        this.updateCanvas();\n      });\n    };\n  }\n  componentDidUpdate() {\n    document.scrollTop = 0;\n  }\n  componentWillUnmount() {\n    document.scrollTop = 0;\n  }\n  render() {\n    return (\n      <Container fluid style={{ marginTop: \"80px\" }}>\n        <Row>\n          <canvas ref=\"canvas\" width=\"1158\" height=\"770\"></canvas>\n        </Row>\n      </Container>\n    );\n  }\n}\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}