{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{createRef,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var canvasRef=/*#__PURE__*/createRef();function getImage(index){return\"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\"+index.toString().padStart(4,0)+\".jpg\";}var updateImage=function updateImage(imgObj,index,ctx){if(index===0||index===null){index=1;}imgObj.src=getImage(index);ctx.drawImage(imgObj,0,0);};function Profile(){var updateCanvas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var canvas,ctx,frameCount,imageObj1,html,scrollTop,maxScrollTop,scrollFraction,frameIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:canvas=canvasRef.current;ctx=canvas.getContext(\"2d\");frameCount=147;imageObj1=document.getElementById(\"source\");_context.next=6;return getImage(1);case 6:imageObj1.src=_context.sent;canvas.width=imageObj1.width;canvas.height=imageObj1.height;html=document.documentElement;scrollTop=html.scrollTop;maxScrollTop=html.scrollHeight-window.innerHeight;scrollFraction=scrollTop/maxScrollTop;console.log(scrollTop,scrollFraction);frameIndex=Math.min(frameCount-1,Math.floor(scrollFraction*frameCount));updateImage(imageObj1,frameIndex+1,ctx);console.log(frameIndex);case 17:case\"end\":return _context.stop();}}},_callee);}));return function updateCanvas(){return _ref.apply(this,arguments);};}();useEffect(function(){document.onscroll=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return requestAnimationFrame(function(){updateCanvas();});case 2:return _context2.abrupt(\"return\",function(){window.removeEventListener(onscroll);cancelAnimationFrame();});case 3:case\"end\":return _context2.stop();}}},_callee2);}));},[]);//   const draw = (ctx, frameCount) => {\n// const html = document.documentElement;\n// const canvas = document.createElement(\"canvas\");\n// const ctx = canvas.id(\"profile\");\n// const context = canvas.getContext(\"2d\");\n// canvas.width = 1158;\n// canvas.height =1000;\n// // canvas.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n// // ctx.beginPath();\n// // ctx.fill();\n// const img = new Image();\n// img.src = currentFrame(1);\n// img.onload = function () {\n//   context.drawImage(img, 0, 0);\n// };\n// const updateImage = (index) => {\n//   img.src = currentFrame(index);\n//   ctx.drawImage(img, 0, 0);\n// };\n//   requestAnimationFrame(() => updateImage(frameCount + 1));\n//   console.log(maxScrollTop);\n// });\n//};\nreturn/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{},children:/*#__PURE__*/_jsx(\"img\",{id:\"source\"})});}export default Profile;","map":{"version":3,"sources":["/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js"],"names":["React","createRef","useEffect","canvasRef","getImage","index","toString","padStart","updateImage","imgObj","ctx","src","drawImage","Profile","updateCanvas","canvas","current","getContext","frameCount","imageObj1","document","getElementById","width","height","html","documentElement","scrollTop","maxScrollTop","scrollHeight","window","innerHeight","scrollFraction","console","log","frameIndex","Math","min","floor","onscroll","requestAnimationFrame","removeEventListener","cancelAnimationFrame"],"mappings":"6OAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,KAA4C,OAA5C,C,2CAEA,GAAMC,CAAAA,SAAS,cAAGF,SAAS,EAA3B,CACA,QAASG,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACvB,MACE,kIACAA,KAAK,CAACC,QAAN,GAAiBC,QAAjB,CAA0B,CAA1B,CAA6B,CAA7B,CADA,CAEA,MAHF,CAKD,CACD,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAASJ,KAAT,CAAgBK,GAAhB,CAAwB,CAC1C,GAAIL,KAAK,GAAK,CAAV,EAAeA,KAAK,GAAK,IAA7B,CAAmC,CACjCA,KAAK,CAAG,CAAR,CACD,CACDI,MAAM,CAACE,GAAP,CAAaP,QAAQ,CAACC,KAAD,CAArB,CAEAK,GAAG,CAACE,SAAJ,CAAcH,MAAd,CAAsB,CAAtB,CAAyB,CAAzB,EACD,CAPD,CASA,QAASI,CAAAA,OAAT,EAAmB,CACjB,GAAMC,CAAAA,YAAY,0FAAG,6NACbC,MADa,CACJZ,SAAS,CAACa,OADN,CAEbN,GAFa,CAEPK,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAFO,CAGbC,UAHa,CAGA,GAHA,CAKfC,SALe,CAKHC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CALG,uBAMGjB,CAAAA,QAAQ,CAAC,CAAD,CANX,QAMnBe,SAAS,CAACR,GANS,eAOnBI,MAAM,CAACO,KAAP,CAAeH,SAAS,CAACG,KAAzB,CACAP,MAAM,CAACQ,MAAP,CAAgBJ,SAAS,CAACI,MAA1B,CAEMC,IAVa,CAUNJ,QAAQ,CAACK,eAVH,CAWbC,SAXa,CAWDF,IAAI,CAACE,SAXJ,CAYbC,YAZa,CAYEH,IAAI,CAACI,YAAL,CAAoBC,MAAM,CAACC,WAZ7B,CAabC,cAba,CAaIL,SAAS,CAAGC,YAbhB,CAcnBK,OAAO,CAACC,GAAR,CAAYP,SAAZ,CAAuBK,cAAvB,EACMG,UAfa,CAeAC,IAAI,CAACC,GAAL,CACjBlB,UAAU,CAAG,CADI,CAEjBiB,IAAI,CAACE,KAAL,CAAWN,cAAc,CAAGb,UAA5B,CAFiB,CAfA,CAoBnBV,WAAW,CAACW,SAAD,CAAYe,UAAU,CAAG,CAAzB,CAA4BxB,GAA5B,CAAX,CAEAsB,OAAO,CAACC,GAAR,CAAYC,UAAZ,EAtBmB,uDAAH,kBAAZpB,CAAAA,YAAY,0CAAlB,CAyBAZ,SAAS,CAAC,UAAM,CACdkB,QAAQ,CAACkB,QAAT,sEAAoB,+JACZC,CAAAA,qBAAqB,CAAC,UAAM,CAChCzB,YAAY,GACb,CAF0B,CADT,yCAKX,UAAM,CACXe,MAAM,CAACW,mBAAP,CAA2BF,QAA3B,EACAG,oBAAoB,GACrB,CARiB,0DAApB,GAUD,CAXQ,CAWN,EAXM,CAAT,CAaA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA,mBACE,eAAQ,GAAG,CAAEtC,SAAb,CAAwB,KAAK,CAAE,EAA/B,uBACE,YAAK,EAAE,CAAC,QAAR,EADF,EADF,CAKD,CAED,cAAeU,CAAAA,OAAf","sourcesContent":["import React, { createRef, useEffect } from \"react\";\n\nconst canvasRef = createRef();\nfunction getImage(index) {\n  return (\n    \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n    index.toString().padStart(4, 0) +\n    \".jpg\"\n  );\n}\nconst updateImage = (imgObj, index, ctx) => {\n  if (index === 0 || index === null) {\n    index = 1;\n  }\n  imgObj.src = getImage(index);\n\n  ctx.drawImage(imgObj, 0, 0);\n};\n\nfunction Profile() {\n  const updateCanvas = async () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const frameCount = 147;\n\n    var imageObj1 = document.getElementById(\"source\");\n    imageObj1.src = await getImage(1);\n    canvas.width = imageObj1.width;\n    canvas.height = imageObj1.height;\n\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    console.log(scrollTop, scrollFraction);\n    const frameIndex = Math.min(\n      frameCount - 1,\n      Math.floor(scrollFraction * frameCount)\n    );\n\n    updateImage(imageObj1, frameIndex + 1, ctx);\n\n    console.log(frameIndex);\n  };\n\n  useEffect(() => {\n    document.onscroll = async () => {\n      await requestAnimationFrame(() => {\n        updateCanvas();\n      });\n\n      return () => {\n        window.removeEventListener(onscroll);\n        cancelAnimationFrame();\n      };\n    };\n  }, []);\n\n  //   const draw = (ctx, frameCount) => {\n\n  // const html = document.documentElement;\n  // const canvas = document.createElement(\"canvas\");\n  // const ctx = canvas.id(\"profile\");\n  // const context = canvas.getContext(\"2d\");\n  // canvas.width = 1158;\n  // canvas.height =1000;\n  // // canvas.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  // // ctx.beginPath();\n  // // ctx.fill();\n  // const img = new Image();\n  // img.src = currentFrame(1);\n  // img.onload = function () {\n  //   context.drawImage(img, 0, 0);\n  // };\n  // const updateImage = (index) => {\n  //   img.src = currentFrame(index);\n  //   ctx.drawImage(img, 0, 0);\n  // };\n\n  //   requestAnimationFrame(() => updateImage(frameCount + 1));\n  //   console.log(maxScrollTop);\n  // });\n  //};\n\n  return (\n    <canvas ref={canvasRef} style={{}}>\n      <img id=\"source\"></img>\n    </canvas>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}