{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{createRef,useLayoutEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var canvasRef=/*#__PURE__*/createRef();function getImage(index){return\"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\"+index.toString().padStart(4,0)+\".jpg\";}var updateImage=function updateImage(imgObj,index,ctx){if(index===0||index===null){index=1;}imgObj.src=getImage(index);ctx.drawImage(imgObj,0,0);};function Profile(){var updateCanvas=function updateCanvas(){var canvas=canvasRef.current;var ctx=canvas.getContext(\"2d\");var frameCount=147;var imageObj1=new Image();imageObj1.src=getImage(1);canvas.width=imageObj1.width;canvas.height=imageObj1.height;var html=document.documentElement;var scrollTop=html.scrollTop;var maxScrollTop=html.scrollHeight-window.innerHeight;var scrollFraction=scrollTop/maxScrollTop;console.log(scrollTop,scrollFraction);var frameIndex=Math.min(frameCount-1,Math.floor(scrollFraction*frameCount));updateImage(imageObj1,frameIndex+1,ctx);console.log(frameIndex);};useLayoutEffect(function(){document.onscroll=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return requestAnimationFrame(function(){updateCanvas();});case 2:return _context.abrupt(\"return\",function(){window.removeEventListener(onscroll);cancelAnimationFrame();});case 3:case\"end\":return _context.stop();}}},_callee);}));},[]);//   const draw = (ctx, frameCount) => {\n// const html = document.documentElement;\n// const canvas = document.createElement(\"canvas\");\n// const ctx = canvas.id(\"profile\");\n// const context = canvas.getContext(\"2d\");\n// canvas.width = 1158;\n// canvas.height =1000;\n// // canvas.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n// // ctx.beginPath();\n// // ctx.fill();\n// const img = new Image();\n// img.src = currentFrame(1);\n// img.onload = function () {\n//   context.drawImage(img, 0, 0);\n// };\n// const updateImage = (index) => {\n//   img.src = currentFrame(index);\n//   ctx.drawImage(img, 0, 0);\n// };\n//   requestAnimationFrame(() => updateImage(frameCount + 1));\n//   console.log(maxScrollTop);\n// });\n//};\nreturn/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{},children:/*#__PURE__*/_jsx(\"img\",{id:\"source\"})});}export default Profile;","map":{"version":3,"sources":["/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js"],"names":["React","createRef","useLayoutEffect","canvasRef","getImage","index","toString","padStart","updateImage","imgObj","ctx","src","drawImage","Profile","updateCanvas","canvas","current","getContext","frameCount","imageObj1","Image","width","height","html","document","documentElement","scrollTop","maxScrollTop","scrollHeight","window","innerHeight","scrollFraction","console","log","frameIndex","Math","min","floor","onscroll","requestAnimationFrame","removeEventListener","cancelAnimationFrame"],"mappings":"6OAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,eAA3B,KAAkD,OAAlD,C,2CAEA,GAAMC,CAAAA,SAAS,cAAGF,SAAS,EAA3B,CACA,QAASG,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACvB,MACE,kIACAA,KAAK,CAACC,QAAN,GAAiBC,QAAjB,CAA0B,CAA1B,CAA6B,CAA7B,CADA,CAEA,MAHF,CAKD,CACD,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAASJ,KAAT,CAAgBK,GAAhB,CAAwB,CAC1C,GAAIL,KAAK,GAAK,CAAV,EAAeA,KAAK,GAAK,IAA7B,CAAmC,CACjCA,KAAK,CAAG,CAAR,CACD,CACDI,MAAM,CAACE,GAAP,CAAaP,QAAQ,CAACC,KAAD,CAArB,CAEAK,GAAG,CAACE,SAAJ,CAAcH,MAAd,CAAsB,CAAtB,CAAyB,CAAzB,EACD,CAPD,CASA,QAASI,CAAAA,OAAT,EAAmB,CACjB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,MAAM,CAAGZ,SAAS,CAACa,OAAzB,CACA,GAAMN,CAAAA,GAAG,CAAGK,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAZ,CACA,GAAMC,CAAAA,UAAU,CAAG,GAAnB,CAEA,GAAIC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,KAAJ,EAAhB,CACAD,SAAS,CAACR,GAAV,CAAgBP,QAAQ,CAAC,CAAD,CAAxB,CACAW,MAAM,CAACM,KAAP,CAAeF,SAAS,CAACE,KAAzB,CACAN,MAAM,CAACO,MAAP,CAAgBH,SAAS,CAACG,MAA1B,CAEA,GAAMC,CAAAA,IAAI,CAAGC,QAAQ,CAACC,eAAtB,CACA,GAAMC,CAAAA,SAAS,CAAGH,IAAI,CAACG,SAAvB,CACA,GAAMC,CAAAA,YAAY,CAAGJ,IAAI,CAACK,YAAL,CAAoBC,MAAM,CAACC,WAAhD,CACA,GAAMC,CAAAA,cAAc,CAAGL,SAAS,CAAGC,YAAnC,CACAK,OAAO,CAACC,GAAR,CAAYP,SAAZ,CAAuBK,cAAvB,EACA,GAAMG,CAAAA,UAAU,CAAGC,IAAI,CAACC,GAAL,CACjBlB,UAAU,CAAG,CADI,CAEjBiB,IAAI,CAACE,KAAL,CAAWN,cAAc,CAAGb,UAA5B,CAFiB,CAAnB,CAKAV,WAAW,CAACW,SAAD,CAAYe,UAAU,CAAG,CAAzB,CAA4BxB,GAA5B,CAAX,CAEAsB,OAAO,CAACC,GAAR,CAAYC,UAAZ,EACD,CAvBD,CAyBAhC,eAAe,CAAC,UAAM,CACpBsB,QAAQ,CAACc,QAAT,sEAAoB,yJACZC,CAAAA,qBAAqB,CAAC,UAAM,CAChCzB,YAAY,GACb,CAF0B,CADT,wCAKX,UAAM,CACXe,MAAM,CAACW,mBAAP,CAA2BF,QAA3B,EACAG,oBAAoB,GACrB,CARiB,wDAApB,GAUD,CAXc,CAWZ,EAXY,CAAf,CAaA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA,mBACE,eAAQ,GAAG,CAAEtC,SAAb,CAAwB,KAAK,CAAE,EAA/B,uBACE,YAAK,EAAE,CAAC,QAAR,EADF,EADF,CAKD,CAED,cAAeU,CAAAA,OAAf","sourcesContent":["import React, { createRef, useLayoutEffect } from \"react\";\n\nconst canvasRef = createRef();\nfunction getImage(index) {\n  return (\n    \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n    index.toString().padStart(4, 0) +\n    \".jpg\"\n  );\n}\nconst updateImage = (imgObj, index, ctx) => {\n  if (index === 0 || index === null) {\n    index = 1;\n  }\n  imgObj.src = getImage(index);\n\n  ctx.drawImage(imgObj, 0, 0);\n};\n\nfunction Profile() {\n  const updateCanvas = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const frameCount = 147;\n\n    var imageObj1 = new Image();\n    imageObj1.src = getImage(1);\n    canvas.width = imageObj1.width;\n    canvas.height = imageObj1.height;\n\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    console.log(scrollTop, scrollFraction);\n    const frameIndex = Math.min(\n      frameCount - 1,\n      Math.floor(scrollFraction * frameCount)\n    );\n\n    updateImage(imageObj1, frameIndex + 1, ctx);\n\n    console.log(frameIndex);\n  };\n\n  useLayoutEffect(() => {\n    document.onscroll = async () => {\n      await requestAnimationFrame(() => {\n        updateCanvas();\n      });\n\n      return () => {\n        window.removeEventListener(onscroll);\n        cancelAnimationFrame();\n      };\n    };\n  }, []);\n\n  //   const draw = (ctx, frameCount) => {\n\n  // const html = document.documentElement;\n  // const canvas = document.createElement(\"canvas\");\n  // const ctx = canvas.id(\"profile\");\n  // const context = canvas.getContext(\"2d\");\n  // canvas.width = 1158;\n  // canvas.height =1000;\n  // // canvas.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  // // ctx.beginPath();\n  // // ctx.fill();\n  // const img = new Image();\n  // img.src = currentFrame(1);\n  // img.onload = function () {\n  //   context.drawImage(img, 0, 0);\n  // };\n  // const updateImage = (index) => {\n  //   img.src = currentFrame(index);\n  //   ctx.drawImage(img, 0, 0);\n  // };\n\n  //   requestAnimationFrame(() => updateImage(frameCount + 1));\n  //   console.log(maxScrollTop);\n  // });\n  //};\n\n  return (\n    <canvas ref={canvasRef} style={{}}>\n      <img id=\"source\"></img>\n    </canvas>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}