{"ast":null,"code":"var _jsxFileName = \"/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useLayoutEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst canvasRef = /*#__PURE__*/createRef();\n\nfunction getImage(index) {\n  return \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" + index.toString().padStart(4, 0) + \".jpg\";\n}\n\nconst updateImage = async (imgObj, index, ctx) => {\n  imgObj.src = getImage(index);\n  await ctx.drawImage(imgObj, 0, 0);\n}; // this.updateImage(imageObj1, frameIndex + 1, ctx);\n// imageObj1.onload = function () {\n//   ctx.drawImage(imageObj1, 20, 20);\n// };\n// window.addEventListener(\"scroll\", () => {\n//   const scrollTop = html.scrollTop;\n//   const maxScrollTop = html.scrollHeight - window.innerHeight;\n//   const scrollFraction = scrollTop / maxScrollTop;\n//   const frameIndex = Math.min(\n//     frameCount - 1,\n//     Math.floor(scrollFraction * frameCount)\n//   );\n//   console.log(maxScrollTop);\n// });\n\n\nfunction Profile() {\n  _s();\n\n  const updateCanvas = () => {\n    //\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const frameCount = 147;\n    var imageObj1 = document.getElementById(\"source\");\n    imageObj1.src = getImage(1);\n    console.log(imageObj1.width, imageObj1.height);\n    canvas.width = imageObj1.width;\n    canvas.height = imageObj1.height; // imageObj1.onload = function () {\n    //   ctx.drawImage(imageObj1, 0, 0);\n    // };\n\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    console.log(scrollTop, scrollFraction);\n    const frameIndex = Math.min(frameCount - 1, Math.floor(scrollFraction * frameCount));\n    updateImage(imageObj1, frameIndex, ctx);\n    console.log(frameIndex);\n  };\n\n  useLayoutEffect(() => {\n    document.onscroll = () => {\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          updateCanvas();\n        });\n      }, 1000);\n      return () => {\n        window.removeEventListener(onscroll);\n        cancelAnimationFrame();\n      };\n    };\n  }, []); //   const draw = (ctx, frameCount) => {\n  // const html = document.documentElement;\n  // const canvas = document.createElement(\"canvas\");\n  // const ctx = canvas.id(\"profile\");\n  // const context = canvas.getContext(\"2d\");\n  // canvas.width = 1158;\n  // canvas.height =1000;\n  // // canvas.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  // // ctx.beginPath();\n  // // ctx.fill();\n  // const img = new Image();\n  // img.src = currentFrame(1);\n  // img.onload = function () {\n  //   context.drawImage(img, 0, 0);\n  // };\n  // const updateImage = (index) => {\n  //   img.src = currentFrame(index);\n  //   ctx.drawImage(img, 0, 0);\n  // };\n  //   requestAnimationFrame(() => updateImage(frameCount + 1));\n  //   console.log(maxScrollTop);\n  // });\n  //};\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"scrollable\",\n    style: {\n      flex: 1,\n      display: \"block\",\n      justifyContent: \"center\",\n      overflow: \"scroll\",\n      scrollBehavior: \"smooth\",\n      msScrollLimit: \"-moz-initial\",\n      position: \"sticky\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        //position: \"fixed\",\n        left: \"50%\",\n        top: \"50%\",\n        maxWidth: \"100vw\",\n        minHeight: \"100vh\",\n        perspective: \"1px\",\n        msScrollLimitYMin: 2,\n        transformStyle: \"preserve-3d\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"source\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Profile, \"n7/vCynhJvM+pLkyL2DMQUF0odM=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js"],"names":["React","createRef","useLayoutEffect","canvasRef","getImage","index","toString","padStart","updateImage","imgObj","ctx","src","drawImage","Profile","updateCanvas","canvas","current","getContext","frameCount","imageObj1","document","getElementById","console","log","width","height","html","documentElement","scrollTop","maxScrollTop","scrollHeight","window","innerHeight","scrollFraction","frameIndex","Math","min","floor","onscroll","setTimeout","requestAnimationFrame","removeEventListener","cancelAnimationFrame","flex","display","justifyContent","overflow","scrollBehavior","msScrollLimit","position","left","top","maxWidth","minHeight","perspective","msScrollLimitYMin","transformStyle"],"mappings":"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","sourcesContent":["import React, { createRef, useLayoutEffect } from \"react\";\n\nconst canvasRef = createRef();\nfunction getImage(index) {\n  return (\n    \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n    index.toString().padStart(4, 0) +\n    \".jpg\"\n  );\n}\nconst updateImage = async (imgObj, index, ctx) => {\n  imgObj.src = getImage(index);\n\n  await ctx.drawImage(imgObj, 0, 0);\n};\n// this.updateImage(imageObj1, frameIndex + 1, ctx);\n\n// imageObj1.onload = function () {\n//   ctx.drawImage(imageObj1, 20, 20);\n// };\n// window.addEventListener(\"scroll\", () => {\n//   const scrollTop = html.scrollTop;\n//   const maxScrollTop = html.scrollHeight - window.innerHeight;\n//   const scrollFraction = scrollTop / maxScrollTop;\n//   const frameIndex = Math.min(\n//     frameCount - 1,\n//     Math.floor(scrollFraction * frameCount)\n//   );\n\n//   console.log(maxScrollTop);\n// });\n\nfunction Profile() {\n  const updateCanvas = () => {\n    //\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const frameCount = 147;\n\n    var imageObj1 = document.getElementById(\"source\");\n    imageObj1.src = getImage(1);\n    console.log(imageObj1.width, imageObj1.height);\n    canvas.width = imageObj1.width;\n    canvas.height = imageObj1.height;\n\n    // imageObj1.onload = function () {\n    //   ctx.drawImage(imageObj1, 0, 0);\n    // };\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    console.log(scrollTop, scrollFraction);\n    const frameIndex = Math.min(\n      frameCount - 1,\n      Math.floor(scrollFraction * frameCount)\n    );\n\n    updateImage(imageObj1, frameIndex, ctx);\n\n    console.log(frameIndex);\n  };\n\n  useLayoutEffect(() => {\n    document.onscroll = () => {\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          updateCanvas();\n        });\n      }, 1000);\n\n      return () => {\n        window.removeEventListener(onscroll);\n        cancelAnimationFrame();\n      };\n    };\n  }, []);\n\n  //   const draw = (ctx, frameCount) => {\n\n  // const html = document.documentElement;\n  // const canvas = document.createElement(\"canvas\");\n  // const ctx = canvas.id(\"profile\");\n  // const context = canvas.getContext(\"2d\");\n  // canvas.width = 1158;\n  // canvas.height =1000;\n  // // canvas.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  // // ctx.beginPath();\n  // // ctx.fill();\n  // const img = new Image();\n  // img.src = currentFrame(1);\n  // img.onload = function () {\n  //   context.drawImage(img, 0, 0);\n  // };\n  // const updateImage = (index) => {\n  //   img.src = currentFrame(index);\n  //   ctx.drawImage(img, 0, 0);\n  // };\n\n  //   requestAnimationFrame(() => updateImage(frameCount + 1));\n  //   console.log(maxScrollTop);\n  // });\n  //};\n\n  return (\n    <div\n      id=\"scrollable\"\n      style={{\n        flex: 1,\n        display: \"block\",\n        justifyContent: \"center\",\n        overflow: \"scroll\",\n        scrollBehavior: \"smooth\",\n        msScrollLimit: \"-moz-initial\",\n        position: \"sticky\",\n      }}\n    >\n      <canvas\n        ref={canvasRef}\n        style={{\n          //position: \"fixed\",\n          left: \"50%\",\n          top: \"50%\",\n          maxWidth: \"100vw\",\n          minHeight: \"100vh\",\n          perspective: \"1px\",\n          msScrollLimitYMin: 2,\n          transformStyle: \"preserve-3d\",\n        }}\n      >\n        <img id=\"source\"></img>\n      </canvas>\n    </div>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}