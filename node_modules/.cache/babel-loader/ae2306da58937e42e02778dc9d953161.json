{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sumankaranjit/myProfile/resume/node_modules/@babel/runtime/helpers/esm/createSuper\";// import React, { createRef, useEffect } from \"react\";\n// const canvasRef = createRef();\n// function getImage(index) {\n//   return (\n//     // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n//     // index.toString().padStart(4, 0) +\n//     // \".jpg\"\n//     process.env.PUBLIC_URL + \"/img/img\" + index.toString() + \".png\"\n//   );\n// }\n// const updateImage = (imgObj, index, ctx) => {\n//   if (index === 0 || index === null) {\n//     index = 1;\n//   }\n//   imgObj.src = getImage(index);\n//   console.log(imgObj);\n//   ctx.drawImage(imgObj, 0, 0);\n// };\n// const getAllImg = async () => {\n//   var x = 0;\n//   while (x != 7) {\n//     x++;\n//     const imgObj = new Image();\n//     imgObj.src = await getImage(x);\n//   }\n// };\n// function Profile() {\n//   getAllImg();\n//   const updateCanvas = async () => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n//     const frameCount = 7;\n//     var imageObj1 = document.getElementById(\"source\");\n//     canvas.width = imageObj1.width;\n//     canvas.height = imageObj1.height;\n//     const html = document.documentElement;\n//     const scrollTop = html.scrollTop;\n//     const maxScrollTop = html.scrollHeight - window.innerHeight;\n//     const scrollFraction = scrollTop / maxScrollTop;\n//     console.log(scrollTop, scrollFraction);\n//     const frameIndex = Math.min(\n//       frameCount - 1,\n//       Math.floor(scrollFraction * frameCount)\n//     );\n//     await updateImage(imageObj1, frameIndex + 1, ctx);\n//     console.log(frameIndex);\n//   };\n//   useEffect(() => {\n//     document.onscroll = async () => {\n//       await requestAnimationFrame(() => {\n//         updateCanvas();\n//       });\n//       return () => {\n//         //window.removeEventListener(onscroll);\n//         // cancelAnimationFrame();\n//       };\n//     };\n//   }, []);\n//   return (\n//     <canvas ref={canvasRef} style={{}}>\n//       <img id=\"source\" src=\"./../assets/img/0001.png\"></img>\n//     </canvas>\n//   );\n// }\n// export default Profile;\nimport React,{Component,createRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var cache={};function importAll(r){r.keys().forEach(function(key){return cache[key]=r(key);});}// Note from the docs -> Warning: The arguments passed to require.context must be literals!\nimportAll(require.context(\"./../assets/img/\",false,/\\.(png|jpe?g|svg)$/));var images=Object.entries(cache).map(function(module){return module[1].default;});var checkImage=function checkImage(path){return new Promise(function(resolve){var img=new Image();img.src=path;img.onload=function(){return resolve(path);};});};var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);_this=_super.call(this);_this.updateImage=function(index){if(index===0||index===null){index=1;}var imgObj=_this.getImage(index);imgObj.onload=function(){return _this.drawImage(imgObj);};};_this.getAllImg=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var x,imgObj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:x=0;case 1:if(!(x!==179)){_context.next=9;break;}x++;imgObj=new Image();_context.next=6;return _this.getImage(x);case 6:imgObj=_context.sent;_context.next=1;break;case 9:case\"end\":return _context.stop();}}},_callee);}));_this.canvasRef=/*#__PURE__*/createRef();_this.canvas=document.createElement(\"canvas\",{refs:_this.canvasRef.current});_this.ctx=_this.canvas.getContext(\"2d\");return _this;}_createClass(Profile,[{key:\"getImage\",value:function getImage(index){// const imgUrl =\n//   // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n//   // index.toString().padStart(4, 0) +\n//   // \".jpg\";\n//   // process.env.PUBLIC_URL +\n//   { img } + index.toString().padStart(5, 0) + \".jpeg\";\n// const imgObj = new Image();\nvar imgObj=images.map(function(image){return image;});var imgO=new Image();var myPromise=checkImage(imgObj[index]);myPromise.then(function(response){imgO.src=imgObj[index];console.log(\"resolved\");}).catch(function(error){return console.error(error);});console.log(imgObj);return imgO;}},{key:\"showImage\",value:function showImage(canvas){var _this2=this;var imgO=new Image();imgO=this.getImage(1);imgO.onload=function(){return _this2.drawImage(imgO);};}},{key:\"showNone\",value:function showNone(){var canvas=this.canvasRef.current;canvas.width=0;canvas.height=0;}},{key:\"drawImage\",value:function drawImage(img){// Use the intrinsic size of image in CSS pixels for the canvas element\n// Will draw the image as 300x227, ignoring the custom size of 60x45\n// given in the constructor\nthis.ctx.drawImage(img,0,0);// To use the custom size we'll have to specify the scale parameters\n// using the element's width and height properties - lets draw one\n// on top in the corner:\n}},{key:\"updateCanvas\",value:function updateCanvas(canvas){var frameCount=179;var html=document.documentElement;var scrollTop=html.scrollTop;var maxScrollTop=html.scrollHeight-window.innerHeight;var scrollFraction=scrollTop/maxScrollTop;this.frameIndex=Math.min(frameCount-1,Math.floor(scrollFraction*frameCount));this.updateImage(this.frameIndex+1);console.log(this.frameIndex);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;this.canvas.width=\"1158\";this.canvas.height=\"770\";document.getElementById(\"canvas-wrapper\").insertAdjacentElement(\"afterbegin\",this.canvas);console.log(this.canvas);this.showImage(this.canvas);document.onscroll=function(){requestAnimationFrame(function(){_this3.updateCanvas(_this3.canvas);});};}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{id:\"canvas-wrapper\"});}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"sources":["/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js"],"names":["React","Component","createRef","cache","importAll","r","keys","forEach","key","require","context","images","Object","entries","map","module","default","checkImage","path","Promise","resolve","img","Image","src","onload","Profile","updateImage","index","imgObj","getImage","drawImage","getAllImg","x","canvasRef","canvas","document","createElement","refs","current","ctx","getContext","image","imgO","myPromise","then","response","console","log","catch","error","width","height","frameCount","html","documentElement","scrollTop","maxScrollTop","scrollHeight","window","innerHeight","scrollFraction","frameIndex","Math","min","floor","getElementById","insertAdjacentElement","showImage","onscroll","requestAnimationFrame","updateCanvas"],"mappings":"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","sourcesContent":["// import React, { createRef, useEffect } from \"react\";\n// const canvasRef = createRef();\n// function getImage(index) {\n//   return (\n//     // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n//     // index.toString().padStart(4, 0) +\n//     // \".jpg\"\n//     process.env.PUBLIC_URL + \"/img/img\" + index.toString() + \".png\"\n//   );\n// }\n// const updateImage = (imgObj, index, ctx) => {\n//   if (index === 0 || index === null) {\n//     index = 1;\n//   }\n//   imgObj.src = getImage(index);\n//   console.log(imgObj);\n//   ctx.drawImage(imgObj, 0, 0);\n// };\n// const getAllImg = async () => {\n//   var x = 0;\n//   while (x != 7) {\n//     x++;\n//     const imgObj = new Image();\n\n//     imgObj.src = await getImage(x);\n//   }\n// };\n// function Profile() {\n//   getAllImg();\n//   const updateCanvas = async () => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n//     const frameCount = 7;\n//     var imageObj1 = document.getElementById(\"source\");\n\n//     canvas.width = imageObj1.width;\n//     canvas.height = imageObj1.height;\n\n//     const html = document.documentElement;\n//     const scrollTop = html.scrollTop;\n//     const maxScrollTop = html.scrollHeight - window.innerHeight;\n//     const scrollFraction = scrollTop / maxScrollTop;\n//     console.log(scrollTop, scrollFraction);\n//     const frameIndex = Math.min(\n//       frameCount - 1,\n//       Math.floor(scrollFraction * frameCount)\n//     );\n\n//     await updateImage(imageObj1, frameIndex + 1, ctx);\n\n//     console.log(frameIndex);\n//   };\n\n//   useEffect(() => {\n//     document.onscroll = async () => {\n//       await requestAnimationFrame(() => {\n//         updateCanvas();\n//       });\n\n//       return () => {\n//         //window.removeEventListener(onscroll);\n//         // cancelAnimationFrame();\n//       };\n//     };\n//   }, []);\n\n//   return (\n//     <canvas ref={canvasRef} style={{}}>\n//       <img id=\"source\" src=\"./../assets/img/0001.png\"></img>\n//     </canvas>\n//   );\n// }\n\n// export default Profile;\nimport React, { Component, createRef } from \"react\";\n\nconst cache = {};\nfunction importAll(r) {\n  r.keys().forEach((key) => (cache[key] = r(key)));\n}\n// Note from the docs -> Warning: The arguments passed to require.context must be literals!\nimportAll(require.context(\"./../assets/img/\", false, /\\.(png|jpe?g|svg)$/));\n\nconst images = Object.entries(cache).map((module) => module[1].default);\n\nconst checkImage = (path) =>\n  new Promise((resolve) => {\n    const img = new Image();\n    img.src = path;\n    img.onload = () => resolve(path);\n  });\n\nclass Profile extends Component {\n  constructor() {\n    super();\n    this.canvasRef = createRef();\n    this.canvas = document.createElement(\"canvas\", {\n      refs: this.canvasRef.current,\n    });\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n  getImage(index) {\n    // const imgUrl =\n    //   // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n    //   // index.toString().padStart(4, 0) +\n    //   // \".jpg\";\n    //   // process.env.PUBLIC_URL +\n    //   { img } + index.toString().padStart(5, 0) + \".jpeg\";\n    // const imgObj = new Image();\n\n    const imgObj = images.map((image) => image);\n    const imgO = new Image();\n    const myPromise = checkImage(imgObj[index]);\n    myPromise\n      .then((response) => {\n        imgO.src = imgObj[index];\n        console.log(\"resolved\");\n      })\n      .catch((error) => console.error(error));\n    console.log(imgObj);\n    return imgO;\n  }\n\n  updateImage = (index) => {\n    if (index === 0 || index === null) {\n      index = 1;\n    }\n    const imgObj = this.getImage(index);\n    imgObj.onload = () => this.drawImage(imgObj);\n  };\n  showImage(canvas) {\n    var imgO = new Image();\n    imgO = this.getImage(1);\n\n    imgO.onload = () => this.drawImage(imgO);\n  }\n  showNone() {\n    const canvas = this.canvasRef.current;\n    canvas.width = 0;\n    canvas.height = 0;\n  }\n  drawImage(img) {\n    // Use the intrinsic size of image in CSS pixels for the canvas element\n\n    // Will draw the image as 300x227, ignoring the custom size of 60x45\n    // given in the constructor\n\n    this.ctx.drawImage(img, 0, 0);\n\n    // To use the custom size we'll have to specify the scale parameters\n    // using the element's width and height properties - lets draw one\n    // on top in the corner:\n  }\n  updateCanvas(canvas) {\n    const frameCount = 179;\n\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n\n    this.frameIndex = Math.min(\n      frameCount - 1,\n      Math.floor(scrollFraction * frameCount)\n    );\n\n    this.updateImage(this.frameIndex + 1);\n    console.log(this.frameIndex);\n  }\n\n  getAllImg = async () => {\n    var x = 0;\n    while (x !== 179) {\n      x++;\n      var imgObj = new Image();\n\n      imgObj = await this.getImage(x);\n    }\n  };\n  componentDidMount() {\n    this.canvas.width = \"1158\";\n    this.canvas.height = \"770\";\n    document\n      .getElementById(\"canvas-wrapper\")\n      .insertAdjacentElement(\"afterbegin\", this.canvas);\n    console.log(this.canvas);\n\n    this.showImage(this.canvas);\n    document.onscroll = () => {\n      requestAnimationFrame(() => {\n        this.updateCanvas(this.canvas);\n      });\n    };\n  }\n\n  componentWillUnmount() {}\n  render() {\n    return <div id=\"canvas-wrapper\"></div>;\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}