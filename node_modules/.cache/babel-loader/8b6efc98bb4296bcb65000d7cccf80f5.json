{"ast":null,"code":"var _jsxFileName = \"/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst canvasRef = /*#__PURE__*/createRef();\n\nfunction getImage(index) {\n  return (// \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n    // index.toString().padStart(4, 0) +\n    // \".jpg\"\n    process.env.PUBLIC_URL + \"/img/img\" + index.toString() + \".png\"\n  );\n}\n\nconst updateImage = (imgObj, index, ctx) => {\n  if (index === 0 || index === null) {\n    index = 1;\n  }\n\n  imgObj.src = getImage(index);\n  console.log(imgObj);\n  ctx.drawImage(imgObj, 0, 0);\n};\n\nconst getAllImg = async () => {\n  var x = 0;\n\n  while (x != 147) {\n    x++;\n    const imgObj = new Image();\n    imgObj.src = await getImage(x);\n  }\n};\n\nfunction Profile() {\n  _s();\n\n  getAllImg();\n\n  const updateCanvas = async () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const frameCount = 147;\n    var imageObj1 = document.getElementById(\"source\");\n    canvas.width = imageObj1.width;\n    canvas.height = imageObj1.height;\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    console.log(scrollTop, scrollFraction);\n    const frameIndex = Math.min(frameCount - 1, Math.floor(scrollFraction * frameCount));\n    await updateImage(imageObj1, frameIndex + 1, ctx);\n    console.log(frameIndex);\n  };\n\n  useEffect(() => {\n    document.onscroll = async () => {\n      await requestAnimationFrame(() => {\n        updateCanvas();\n      });\n      return () => {//window.removeEventListener(onscroll);\n        // cancelAnimationFrame();\n      };\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    style: {},\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      id: \"source\",\n      src: \"./../assets/img/0001.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Profile, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/sumankaranjit/myProfile/resume/src/pages/Profile.js"],"names":["React","createRef","useEffect","canvasRef","getImage","index","process","env","PUBLIC_URL","toString","updateImage","imgObj","ctx","src","console","log","drawImage","getAllImg","x","Image","Profile","updateCanvas","canvas","current","getContext","frameCount","imageObj1","document","getElementById","width","height","html","documentElement","scrollTop","maxScrollTop","scrollHeight","window","innerHeight","scrollFraction","frameIndex","Math","min","floor","onscroll","requestAnimationFrame"],"mappings":"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","sourcesContent":["import React, { createRef, useEffect } from \"react\";\nconst canvasRef = createRef();\nfunction getImage(index) {\n  return (\n    // \"https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/\" +\n    // index.toString().padStart(4, 0) +\n    // \".jpg\"\n    process.env.PUBLIC_URL + \"/img/img\" + index.toString() + \".png\"\n  );\n}\nconst updateImage = (imgObj, index, ctx) => {\n  if (index === 0 || index === null) {\n    index = 1;\n  }\n  imgObj.src = getImage(index);\n  console.log(imgObj);\n  ctx.drawImage(imgObj, 0, 0);\n};\nconst getAllImg = async () => {\n  var x = 0;\n  while (x != 147) {\n    x++;\n    const imgObj = new Image();\n\n    imgObj.src = await getImage(x);\n  }\n};\nfunction Profile() {\n  getAllImg();\n  const updateCanvas = async () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const frameCount = 147;\n    var imageObj1 = document.getElementById(\"source\");\n\n    canvas.width = imageObj1.width;\n    canvas.height = imageObj1.height;\n\n    const html = document.documentElement;\n    const scrollTop = html.scrollTop;\n    const maxScrollTop = html.scrollHeight - window.innerHeight;\n    const scrollFraction = scrollTop / maxScrollTop;\n    console.log(scrollTop, scrollFraction);\n    const frameIndex = Math.min(\n      frameCount - 1,\n      Math.floor(scrollFraction * frameCount)\n    );\n\n    await updateImage(imageObj1, frameIndex + 1, ctx);\n\n    console.log(frameIndex);\n  };\n\n  useEffect(() => {\n    document.onscroll = async () => {\n      await requestAnimationFrame(() => {\n        updateCanvas();\n      });\n\n      return () => {\n        //window.removeEventListener(onscroll);\n        // cancelAnimationFrame();\n      };\n    };\n  }, []);\n\n  return (\n    <canvas ref={canvasRef} style={{}}>\n      <img id=\"source\" src=\"./../assets/img/0001.png\"></img>\n    </canvas>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}